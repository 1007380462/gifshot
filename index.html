<html>
  <head>
    <script src="src/gifshot.js"></script>
  </head>

  <body>

    <form action="">
        <label for="interval">Interval</label>
        <input name="interval" id="interval" value=".2" size="5"></input>

        <label for="numFrames">Number of Frames</label>
        <input name="numFrames" id="numFrames" value="15" size="5"></input>

        <label for="gifHeight">GIF Height</label>
        <input name="gifHeight" id="gifHeight" value="400" size="5"></input>

        <label for="gifWidth">GIF Width</label>
        <input name="gifWidth" id="gifWidth" value="400" size="5"></input>

        <button type="submit">Create GIF</button>
        <button type="button" id="snapShot">Take Snapshot</button>
        <progress max="1" value="0"></progress>
    </form>
</video>

<script src='http://code.jquery.com/jquery-1.8.3.min.js'></script>
<script type="text/javascript" src="http://download-data-uri.appspot.com/js/download-data-uri.js"></script>

  <script>
    var form = document.querySelector("form"),
        interval = document.querySelector("#interval"),
        numFrames = document.querySelector("#numFrames"),
        gifHeight = document.querySelector("#gifHeight"),
        gifWidth = document.querySelector("#gifWidth"),
        progressBar = document.querySelector("progress"),
        snapShot = document.querySelector("#snapShot");

    form.onsubmit = function(e){
      e.preventDefault();

      gifshot.createGIF({
        // 'video': ['example.mp4', 'example.ogv'],
        // 'images': ['http://i.imgur.com/2OO33vX.jpg', 'http://i.imgur.com/qOwVaSN.png', 'http://i.imgur.com/Vo5mFZJ.gif'],
        'interval': +interval.value || 0.2,
        'numFrames': +numFrames.value || 15,
        'gifHeight': +gifHeight.value || 400,
        'gifWidth':  +gifWidth.value || 400,
        'progressCallback': function(captureProgress){
            progressBar.value = captureProgress;
        }
      }, function(obj) {
      	if(!obj.error) {
          var image = obj.image,
            animatedImage = document.createElement('img');
          animatedImage.src = image;
          document.body.appendChild(animatedImage);
          downloadDataURI({
                  filename: "test.gif", 
                  data: image
          });
        } else {
          console.log('obj', obj);
        }
      });
    }

    snapShot.onclick = function(e){
      gifshot.takeSnapShot({
        'interval': +interval.value || 0.2,
        'numFrames': +numFrames.value || 15,
        'gifHeight': +gifHeight.value || 400,
        'gifWidth':  +gifWidth.value || 400
      } ,function(obj) {
        if(!obj.error) {
          var image = obj.image,
            animatedImage = document.createElement('img');
          animatedImage.src = image;
          document.body.appendChild(animatedImage);
        }
      });
    }

  </script>



  </body>
</html>
