<!DOCTYPE html>
<html>
  <head>
    <script src="build/gifshot.js"></script>
  </head>

  <body>

    <!-- <video id='video' src="example.mp4" style="width:200px;height:200px;"></video> -->

<!--     <video width="456" height="360">
        <source src="example.mp4" type="video/mp4" />
    </video> -->

    <form action="">
        <label for="gifText">GIF Text</label>
        <input name="gifText" id="gifText" value="" size="30"></input>

        <!-- <label for="fontColor">Font Color</label> -->
        <input type="color" name="fontColor" id="fontColor" value="#FFF" size="5"></input>
        <br><br>
      <div>
        <label for="interval">Interval</label>
        <input name="interval" id="interval" value=".1" size="5"></input>

        <label for="numFrames">Number of Frames</label>
        <input name="numFrames" id="numFrames" value="10" size="5"></input>

        <label for="gifHeight">GIF Height</label>
        <input name="gifHeight" id="gifHeight" value="200" size="5"></input>

        <label for="gifWidth">GIF Width</label>
        <input name="gifWidth" id="gifWidth" value="200" size="5"></input>

        <!-- <br><br> -->

        <label for="fontWeight">Font Weight</label>
        <select name="fontWeight" id="fontWeight">
          <option value="normal">normal</option>
          <option value="bold">bold</option>
        </select>

        <label for="fontSize">Font Size</label>
        <input name="fontSize" id="fontSize" value="16px" size="5"></input>

        <label for="fontFamily">Font Family</label>
        <select name="fontFamily" id="fontFamily">
          <option value="sans-serif">sans-serif</option>
          <option value="Arial">Arial</option>
          <option value="Calibri">Calibri</option>
          <option value="Times New Roman">Times New Roman</option>
        </select>

        <label for="textAlign">Text Align</label>
        <select name="textAlign" id="textAlign">
          <option value="center">center</option>
          <option value="left">left</option>
          <option value="right">right</option>
        </select>

        <label for="textBaseline">Text Baseline</label>
        <select name="textBaseline" id="textBaseline">
          <option value="bottom">bottom</option>
          <option value="center">center</option>
          <option value="top">top</option>
        </select>
        <br><br>

<!--         <label for="video">Show Video Example</label>
        <input type="checkbox" name="video" id="video"></input>

        <label for="images">Show Images Example</label>
        <input type="checkbox" name="images" id="images"></input> -->

        <!-- <br><br> -->
      </div>

        <button type="submit">Create GIF</button>
        <button type="button" id="snapShot">Take Snapshot</button>
        <progress max="1" value="0"></progress>
    </form>

  <script>
function downloadURI(uri, name) {
  var link = document.createElement("a");
  link.download = name;
  link.href = uri;
  link.click();
}
  </script>

  <script>
    var form = document.querySelector("form"),
        interval = document.querySelector("#interval"),
        numFrames = document.querySelector("#numFrames"),
        gifHeight = document.querySelector("#gifHeight"),
        gifWidth = document.querySelector("#gifWidth"),
        progressBar = document.querySelector("progress"),
        snapShot = document.querySelector("#snapShot"),
        text = document.querySelector('#gifText'),
        fontWeight = document.querySelector('#fontWeight'),
        fontSize = document.querySelector('#fontSize'),
        fontFamily = document.querySelector('#fontFamily'),
        fontColor = document.querySelector('#fontColor'),
        textAlign = document.querySelector('#textAlign'),
        textBaseline = document.querySelector('#textBaseline'),
        video = document.querySelector('#video'),
        images = document.querySelector('#images');

    form.onsubmit = function(e){
      e.preventDefault();

      gifshot.createGIF({
        // 'keepCameraOn': true,
        // 'webcamVideoElement': document.querySelector('video'),
        // 'video': ['example.mp4'],
        // 'video': document.querySelector('video'),
        // 'images': ['http://i.imgur.com/2OO33vX.jpg', 'http://www.google.com/think/images/google-trends_tools_sm.jpg', 'http://i.imgur.com/qOwVaSN.png', 'http://i.imgur.com/Vo5mFZJ.gif'],
        'text': text.value || '',
        'fontWeight': fontWeight.value || 'normal',
        'fontColor': '#FFF',
        'fontSize': fontSize.value || '22px',
        'fontFamily': fontFamily.value || 'sans-serif',
        'fontColor': fontColor.value || '#FFF',
        'textBaseline': textBaseline.value || 'bottom',
        'textAlign': textAlign.value || 'center',
        'interval': +interval.value || 0.2,
        'numFrames': +numFrames.value || 15,
        'gifHeight': +gifHeight.value || 400,
        'gifWidth':  +gifWidth.value || 400,
        'progressCallback': function(captureProgress){
            progressBar.value = captureProgress;
        }
      }, function(obj) {
      	if(!obj.error) {
          var image = obj.image,
            animatedImage = document.createElement('img');
          animatedImage.src = image;
          document.body.appendChild(animatedImage);
          setTimeout(function() {
            // downloadURI(image, 'examplegif.gif');
          }, 300);
        } else {
          console.log('obj', obj);
          console.log('obj.error', obj.error);
          console.log('obj.errorCode', obj.errorCode);
          console.log('obj.errorMsg', obj.errorMsg);
        }
      });
    }

    snapShot.onclick = function(e){
      gifshot.takeSnapShot({
        'video': video.checked ? ['example.mp4', 'example.ogv'] : null,
        'images': images.checked ? ['http://i.imgur.com/2OO33vX.jpg', 'http://i.imgur.com/qOwVaSN.png', 'http://i.imgur.com/Vo5mFZJ.gif'] : [],
        'text': text.value || '',
        'fontWeight': fontWeight.value || 'normal',
        'fontColor': '#FFF',
        'fontSize': fontSize.value || '16px',
        'fontFamily': fontFamily.value || 'sans-serif',
        'fontColor': fontColor.value || '#FFF',
        'textBaseline': textBaseline.value || 'bottom',
        'textAlign': textAlign.value || 'center',
        'interval': +interval.value || 0.2,
        'numFrames': +numFrames.value || 15,
        'gifHeight': +gifHeight.value || 400,
        'gifWidth':  +gifWidth.value || 400
      } ,function(obj) {
        if(!obj.error) {
          var image = obj.image,
            animatedImage = document.createElement('img');
          animatedImage.src = image;
          document.body.appendChild(animatedImage);
          setTimeout(function() {
            // downloadURI(image, 'examplegif.gif');
          }, 300);
        }
      });
    }

  </script>



  </body>
</html>
